{
  "hash": "d90f1c07be953b8fe78751f94a5a62dd",
  "result": {
    "markdown": "---\ntitle: \"Bar graph with morley\"\nauthor: \"Junho (Sean) Ahn\"\ndate: \"2023-08-26\"\ncategories: [ggplot, visualization]\nimage: \"image.png\"\n---\n\n\n## Initializing\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngraphics.off()\nrm(list = ls())\ngc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells  575892 30.8    1310705   70         NA   669400 35.8\nVcells 1051411  8.1    8388608   64      16384  1851626 14.2\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nversion\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n               _                           \nplatform       aarch64-apple-darwin20      \narch           aarch64                     \nos             darwin20                    \nsystem         aarch64, darwin20           \nstatus                                     \nmajor          4                           \nminor          3.1                         \nyear           2023                        \nmonth          06                          \nday            16                          \nsvn rev        84548                       \nlanguage       R                           \nversion.string R version 4.3.1 (2023-06-16)\nnickname       Beagle Scouts               \n```\n:::\n:::\n\n\n## Loading useful library\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(scales)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'scales'\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n```\n:::\n:::\n\n\n## Select Dataset\n\n**Michelson Speed of Light Data**\n\n### Description\n\nA classical data of Michelson (but not this one with Morley) on measurements done in 1879 on the speed of light. The data consists of five experiments, each consisting of 20 consecutive ‘runs’. The response is the speed of light measurement, suitably coded (km/sec, with 299000 subtracted).\n\n### Usage\n\nmorley\n\n### Format\n\nA data frame with 100 observations on the following 3 variables.\n\n`Expt`\nThe experiment number, from 1 to 5.\n\n`Run`\nThe run number within each experiment.\n\n`Speed`\nSpeed-of-light measurement.\n\n### Details\n\nThe data is here viewed as a randomized block experiment with ‘experiment’ and ‘run’ as the factors. ‘run’ may also be considered a quantitative variate to account for linear (or polynomial) changes in the measurement over the course of a single experiment.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmorley |> head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    Expt Run Speed\n001    1   1   850\n002    1   2   740\n003    1   3   900\n004    1   4  1070\n005    1   5   930\n006    1   6   850\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(morley)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"data.frame\"\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(morley)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 100   3\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 <- morley |> group_by(Expt) |> summarise(Avg = mean(Speed))\ndf1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n   Expt   Avg\n  <int> <dbl>\n1     1  909 \n2     2  856 \n3     3  845 \n4     4  820.\n5     5  832.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg)) +\n  geom_col()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg, fill=as.factor(Expt))) +\n  geom_col()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\nA number of color palettes have been developed with the intention of being accessible to people who are colorblind. Three of them appear below, from the [IBM Design Library](https://lospec.com/palette-list/ibm-color-blind-safe), Bang Wong, and Paul Tol respectively. Click on any of them to load it into the color palette selection tool above.\n\n**IBM Color Blind Safe Palette**\n\n\"#648fff\", \"#785ef0\", \"#dc267f\", \"#fe6100\", \"#ffb000\", \"#000000\", \"#ffffff\"\n\n\n::: {.cell}\n\n```{.r .cell-code}\nIBMColor <- c(\"#648fff\", \"#785ef0\", \"#dc267f\", \"#fe6100\", \"#ffb000\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg, fill=as.factor(Expt))) +\n  geom_col(show.legend = FALSE) +\n  scale_fill_manual(values = IBMColor)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg, fill=as.factor(Expt))) +\n  geom_col(show.legend = FALSE) +\n  scale_fill_manual(values = IBMColor) +\n  scale_y_continuous(limits = c(750, 950), breaks = seq(750, 950, 50))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 5 rows containing missing values (`geom_col()`).\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nIf the purpose is to zoom, use the limit argument in the coordinate system (see [coord_cartesian()](https://ggplot2.tidyverse.org/reference/coord_cartesian.html)).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg, fill=as.factor(Expt))) +\n  geom_col(show.legend = FALSE) +\n  scale_fill_manual(values = IBMColor) +\n  scale_y_continuous(breaks = seq(750, 950, 50)) +\n  coord_cartesian(ylim = c(750,950))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg, fill=as.factor(Expt))) +\n  geom_col(show.legend = FALSE) +\n  geom_hline(yintercept =  mean(df1$Avg), lty = 3, linewidth = 1, color = \"#000000\") + # native R pipe operator NOT support '.Avg'  \n  scale_fill_manual(values = IBMColor) +\n  scale_y_continuous(breaks = seq(750, 950, 50)) +\n  coord_cartesian(ylim = c(750,950))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg, fill=as.factor(Expt), label = Avg)) +\n  geom_col(show.legend = FALSE) +\n  geom_hline(yintercept =  mean(df1$Avg), lty = 3, linewidth = 1, color = \"#000000\") + # native R pipe operator NOT support '.Avg'  \n  geom_text(vjust = 2.5, fontface = \"bold\", color = \"white\") +\n  annotate(\"text\", x = 4.5, y = 870, label = paste0(\"Average of Light speed is 852.5km/sec\",\"\\n\",\"(with 299,000 subtracted)\")) +\n  scale_fill_manual(values = IBMColor) +\n  scale_y_continuous(breaks = seq(750, 950, 50)) +\n  coord_cartesian(ylim = c(750,950))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf1 |> \n  ggplot(aes(Expt, Avg, fill=as.factor(Expt), label = Avg)) +\n  geom_col(show.legend = FALSE) +\n  geom_hline(yintercept =  mean(df1$Avg), lty = 3, linewidth = 1, color = \"#000000\") + # native R pipe operator NOT support '.Avg'  \n  geom_text(vjust = 2.5, fontface = \"bold\", color = \"white\") +\n  annotate(\"text\", x = 4.5, y = 870, label = paste0(\"Average of Light speed is 852.5km/sec\",\"\\n\",\"(with 299,000 subtracted)\")) +\n  scale_fill_manual(values = IBMColor) +\n  scale_y_continuous(breaks = seq(750, 950, 50)) +\n  coord_cartesian(ylim = c(750,950)) +\n  labs(x = \"The experiment number\", y = \"Avg. Speed-of-light (km/s, with -299,000km/s)\", \n       title = \"Michelson Speed of Light Data\",\n       subtitle = paste0(\"A classical data of Michelson (but not this one with Morley) on measurements done\",\"\\n\",\"in 1879 on the speed of light.\")) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n\n<div class=\"right\">\n__END OF POST__\n</div>",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}